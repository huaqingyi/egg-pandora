{"version":3,"sources":["app/pandora/router/src/handler/controller-handler.ts"],"names":[],"mappings":";;AAAA,4BAA0B;AAE1B,0CAGsB;AAEtB,IAAM,oBAAoB,GAAG,MAAM,CAAC,sBAAsB,CAAC,CAAC;AAC5D,IAAM,qBAAqB,GAAG,MAAM,CAAC,uBAAuB,CAAC,CAAC;AAC9D,IAAM,qBAAqB,GAAG,MAAM,CAAC,uBAAuB,CAAC,CAAC;AAE9D;IAAA;IA4CA,CAAC;IA1CC,kCAAM,GAAN;QACE,OAAO,IAAI,CAAC,qBAAqB,CAAC,CAAC,sCAA0B,CAAC,CAAC;IACjE,CAAC;IAED,qCAAS,GAAT,UAAU,MAAM;QACd,IAAM,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC,sCAA0B,EAAE,MAAM,CAAC,CAAC;QACvE,IAAM,gBAAgB,GAAG,OAAO,CAAC,WAAW,CAAC,sCAA0B,EAAE,MAAM,CAAC,CAAC;QACjF,OAAO;YACL,MAAM,QAAA;YACN,gBAAgB,kBAAA;SACjB,CAAC;IACJ,CAAC;IAED,4BAAC,qBAAqB,CAAC,GAAvB,UAAwB,QAAQ;QAC9B,OAAO,UAAA,KAAK;YACV,OAAO,UAAC,MAAM;gBACZ,OAAO,CAAC,cAAc,CAAC,QAAQ,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;YAClD,CAAC,CAAC;QACJ,CAAC,CAAC;IACJ,CAAC;IAED,4BAAC,qBAAqB,CAAC,GAAvB,UAAwB,QAAQ;QAC9B,OAAO,UAAC,MAAM,EAAE,MAAM;YACpB,OAAO,UAAC,MAAM;gBACZ,OAAO,CAAC,cAAc,CAAC,QAAQ,EAAE;oBAC/B,IAAI,EAAE,MAAM;oBACZ,WAAW,EAAE,MAAM;iBACpB,EAAE,MAAM,CAAC,CAAC;YACb,CAAC,CAAC;QACJ,CAAC,CAAC;IACJ,CAAC;IAED,4BAAC,oBAAoB,CAAC,GAAtB,UAAuB,QAAQ;QAC7B,OAAO,UAAA,MAAM;YACX,OAAO,UAAA,MAAM;gBACX,IAAM,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC;gBAC5D,MAAM,GAAG,CAAC,MAAM,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;gBACvD,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;gBAChC,OAAO,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;YACnD,CAAC,CAAC;QACJ,CAAC,CAAC;IACJ,CAAC;IACH,wBAAC;AAAD,CA5CA,AA4CC,IAAA;AAED,MAAM,CAAC,OAAO,GAAG,iBAAiB,CAAC","file":"../../../../../../app/pandora/router/src/handler/controller-handler.js","sourcesContent":["import 'reflect-metadata';\n\nimport {\n  CONTROLLER_PREFIX_METADATA,\n  CONTROLLER_RENDER_METADATA\n} from '../constants';\n\nconst createArrayDecorator = Symbol('createArrayDecorator');\nconst createSingleDecorator = Symbol('createSingleDecorator');\nconst createCoupleDecorator = Symbol('createCoupleDecorator');\n\nclass ControllerHandler {\n\n  prefix() {\n    return this[createSingleDecorator](CONTROLLER_PREFIX_METADATA);\n  }\n\n  getMetada(target) {\n    const prefix = Reflect.getMetadata(CONTROLLER_PREFIX_METADATA, target);\n    const renderController = Reflect.getMetadata(CONTROLLER_RENDER_METADATA, target);\n    return {\n      prefix,\n      renderController\n    };\n  }\n\n  [createSingleDecorator](metadata) {\n    return value => {\n      return (target) => {\n        Reflect.defineMetadata(metadata, value, target);\n      };\n    };\n  }\n\n  [createCoupleDecorator](metadata) {\n    return (value1, value2) => {\n      return (target) => {\n        Reflect.defineMetadata(metadata, {\n          name: value2,\n          description: value1\n        }, target);\n      };\n    };\n  }\n\n  [createArrayDecorator](metadata) {\n    return values => {\n      return target => {\n        const _values = Reflect.getMetadata(metadata, target) || [];\n        values = (values instanceof Array) ? values : [values];\n        values = values.concat(_values);\n        Reflect.defineMetadata(metadata, values, target);\n      };\n    };\n  }\n}\n\nmodule.exports = ControllerHandler;"]}