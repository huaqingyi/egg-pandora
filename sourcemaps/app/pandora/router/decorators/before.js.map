{"version":3,"sources":["app/pandora/router/decorators/before.ts"],"names":[],"mappings":";;;AAEA,0CAAsE;AAEtE,SAAgB,MAAM,CAA6B,GAAG,UAAsD;IACxG,OAAO,CAAgD,MAAS,EAAE,EAAE;QAChE,MAAM,CAAC,8BAAmB,CAAC,GAAG,UAAU,CAAC;IAC7C,CAAC,CAAA;AACL,CAAC;AAJD,wBAIC;AAED,SAAgB,OAAO,CAA6B,GAAG,UAAsD;IACzG,OAAO,CAAC,MAAkB,EAAE,YAAoB,EAAE,EAAE;QAChD,MAAM,UAAU,GAAG,MAAM,CAAC,WAAW,CAAC,6BAAkB,CAAC,IAAI,EAAE,CAAC;QAChE,MAAM,OAAO,GAAmC,UAAU,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;QAC/E,OAAO,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC,CAAC;QAC5B,UAAU,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC;QACnC,MAAM,CAAC,WAAW,CAAC,6BAAkB,CAAC,GAAG,UAAU,CAAC;IACxD,CAAC,CAAA;AACL,CAAC;AARD,0BAQC","file":"../../../../../app/pandora/router/decorators/before.js","sourcesContent":["import { Controller } from 'egg';\nimport Router from 'koa-router';\nimport { PANDORACONTROLMIDLE, PANDORAACTIONMIDLE } from '../preconst';\n\nexport function Before<StateT = any, CustomT = {}>(...middleware: Array<Router.IMiddleware<StateT, CustomT>>) {\n    return <T extends (new (...props: any) => Controller)>(target: T) => {\n        target[PANDORACONTROLMIDLE] = middleware;\n    }\n}\n\nexport function ABefore<StateT = any, CustomT = {}>(...middleware: Array<Router.IMiddleware<StateT, CustomT>>) {\n    return (target: Controller, prototypeKey: string) => {\n        const actionsall = target.constructor[PANDORAACTIONMIDLE] || {};\n        const actions: Router.IMiddleware<any, any>[] = actionsall[prototypeKey] || [];\n        actions.push(...middleware);\n        actionsall[prototypeKey] = actions;\n        target.constructor[PANDORAACTIONMIDLE] = actionsall;\n    }\n}"]}